<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LobbyHub</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: #0f1923;
  color: #fff;
}
header {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 30px 20px;
  background: #1a2733;
  box-shadow: 0 2px 10px rgba(0,0,0,0.6);
}
header .logo {
  font-size: 3rem;
  font-weight: 800;
  letter-spacing: 2px;
  text-align: center;
}
header .logo .lobby { color: black; text-shadow: 2px 2px 5px rgba(255,255,255,0.3); }
header .logo .hub { color: yellow; text-shadow: 2px 2px 5px rgba(0,0,0,0.5); }

.cards { display: grid; grid-template-columns: 1fr; gap: 20px; padding: 30px 50px; }
.ad-area {
  background: linear-gradient(145deg, #1a2733, #233446);
  color: #fff;
  text-align: center;
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.6);
  transition: transform 0.3s, box-shadow 0.3s;
}
.ad-area:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.7);
}
.ad-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #ff4655;
  margin-bottom: 10px;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
}

.filters { display: flex; gap: 20px; padding: 20px 50px; flex-wrap: wrap; justify-content: center; }
.apply-btn { padding: 14px 24px; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; background: linear-gradient(90deg, #ff4655, #ff6b81); color: #fff; transition: 0.3s, transform 0.2s; }
.apply-btn:hover { transform: scale(1.05); box-shadow: 0 4px 12px rgba(255,70,85,0.5); }

table {
  width: calc(100% - 100px);
  margin: 20px 50px;
  border-collapse: separate;
  border-spacing: 0;
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(0,0,0,0.5);
}
table th { background: linear-gradient(90deg, #ff4655, #ff6b81); color: #fff; font-weight: 600; text-align: left; padding: 14px 16px; }
table td { padding: 12px 16px; transition: background 0.2s; }
table tr:hover td { background: #233446; }

.modal { display: none; position: fixed; top: 0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.75); justify-content: center; align-items: center; }
.modal-content { background: linear-gradient(145deg, #1a2733, #233446); padding: 25px; border-radius: 18px; width: 400px; display: flex; flex-direction: column; gap: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.7); }
.modal-content label { margin-bottom: 5px; font-weight: 500; }
.modal-content input, .modal-content select { width: 100%; padding: 10px; border-radius: 10px; border: none; background: #1a2733; color: #fff; font-size: 0.95rem; }
.modal-content button { margin-top: 10px; }
.close { align-self: flex-end; cursor:pointer; font-weight: bold; font-size: 1.3rem; }

@media(max-width:768px){
  header { flex-direction: column; padding: 20px; }
  .cards { padding: 20px; }
  .filters { padding: 10px 20px; flex-direction: column; }
  table { width: calc(100% - 40px); margin: 20px; font-size: 0.85rem; }
  table th, table td { padding: 10px; }
  .modal-content { width: 90%; padding: 20px; }
  .apply-btn { width: 100%; }
}
</style>
</head>
<body>

<header>
  <div class="logo"><span class="lobby">Lobby</span><span class="hub">Hub</span></div>
</header>

<div class="cards">
  <div class="ad-area">
    <div class="ad-title">Reklam Köşemiz</div>
    Burası reklam alanıdır. Reklam vermek için: <strong>uzysoft@gmail.com</strong>
  </div>
</div>

<div class="filters">
  <button class="apply-btn" id="openModalBtn">Oyuncu Ara</button>
</div>

<table id="playerTable">
  <thead>
    <tr>
      <th>Lobi Kodu</th>
      <th>Oyun Modu</th>
      <th>Minimum Rank</th>
      <th>Maksimum Rank</th>
      <th>Oyuncu Sayısı</th>
      <th>Yaş Aralığı</th>
      <th>Lobi Açılış Zamanı</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div class="modal" id="playerModal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <label>Lobi Kodu</label>
    <input type="text" id="lobbyCode" onkeypress="return isNumberKey(event)">
    <label>Oyun Modu</label>
    <select id="gameMode">
      <option value="Derecesiz">Derecesiz</option>
      <option value="Dereceli">Dereceli</option>
      <option value="DeRank FF">DeRank FF</option>  
    </select>
    <label>Minimum Rank</label>
    <select id="minRank">
      <option value="Demir">Demir</option>
      <option value="Bronz">Bronz</option>
      <option value="Gümüş">Gümüş</option>
      <option value="Altın">Altın</option>
      <option value="Platin">Platin</option>
      <option value="Elmas">Elmas</option>
      <option value="Ölümsüz">Ölümsüz</option>
      <option value="Radyant">Radyant</option>
    </select>
    <label>Maksimum Rank</label>
    <select id="maxRank">
      <option value="Demir">Demir</option>
      <option value="Bronz">Bronz</option>
      <option value="Gümüş">Gümüş</option>
      <option value="Altın">Altın</option>
      <option value="Platin">Platin</option>
      <option value="Elmas">Elmas</option>
      <option value="Ölümsüz">Ölümsüz</option>
      <option value="Radyant">Radyant</option>
    </select>
    <label>Oyuncu Sayısı</label>
    <select id="playerCount">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
    </select>
    <label>Yaş Aralığı</label>
    <select id="ageRange">
      <option value="Tümü">Tümü</option>
      <option value="18-25">18-25</option>
      <option value="25-30">25-30</option>
      <option value="30+">30+</option>
    </select>
    <button class="apply-btn" onclick="addPlayer()">Ara</button>
  </div>
</div>

<script>
const modal = document.getElementById("playerModal");
const openBtn = document.getElementById("openModalBtn");
const closeBtn = document.getElementById("closeModal");
const gameModeSelect = document.getElementById("gameMode");

openBtn.onclick = () => modal.style.display = "flex";
closeBtn.onclick = () => modal.style.display = "none";
window.onclick = (e) => { if(e.target === modal) modal.style.display = "none"; }

function isNumberKey(evt) {
    const charCode = (evt.which) ? evt.which : evt.keyCode;
    return charCode >= 48 && charCode <= 57;
}

gameModeSelect.addEventListener("change", () => {
    if(gameModeSelect.value === "Dereceli") gameModeSelect.style.color = "limegreen";
    else if(gameModeSelect.value === "DeRank FF") gameModeSelect.style.color = "red";
    else gameModeSelect.style.color = "#fff";
});

window.onload = function() {
    const savedPlayers = JSON.parse(localStorage.getItem("players")) || [];
    savedPlayers.forEach(p => addPlayerToDOM(p));
}

function addPlayer() {
  const lobbyCode = document.getElementById("lobbyCode").value;
  const gameMode = gameModeSelect.value;
  const minRank = document.getElementById("minRank").value;
  const maxRank = document.getElementById("maxRank").value;
  const playerCount = document.getElementById("playerCount").value;
  const ageRange = document.getElementById("ageRange").value;

  if(!lobbyCode) { alert("Lobi kodunu girin!"); return; }

  const now = new Date();
  const nowTimestamp = now.getTime();
  const lobbyHistory = JSON.parse(localStorage.getItem("lobbyHistory")) || [];
  const fiveMinutesAgo = nowTimestamp - 5 * 60 * 1000;
  const recentLobbies = lobbyHistory.filter(t => t > fiveMinutesAgo);

  if(recentLobbies.length >= 2){
      alert("Son 5 dakika içinde maksimum 2 lobi açabilirsiniz!");
      return;
  }

  recentLobbies.push(nowTimestamp);
  localStorage.setItem("lobbyHistory", JSON.stringify(recentLobbies));

  const openTime = now.toLocaleString();
  const player = { lobbyCode, gameMode, minRank, maxRank, playerCount, ageRange, openTime };

  const savedPlayers = JSON.parse(localStorage.getItem("players")) || [];
  savedPlayers.push(player);
  localStorage.setItem("players", JSON.stringify(savedPlayers));

  addPlayerToDOM(player);

  modal.style.display = "none";
  document.getElementById("lobbyCode").value = "";
  gameModeSelect.value = "Derecesiz";
  gameModeSelect.style.color = "#fff";
  document.getElementById("minRank").value = "Demir";
  document.getElementById("maxRank").value = "Demir";
  document.getElementById("playerCount").value = "1";
  document.getElementById("ageRange").value = "Tümü";
}

function addPlayerToDOM(player) {
    const tbody = document.querySelector("#playerTable tbody");
    const row = document.createElement("tr");

    // Satır rengini oyun moduna göre belirle
    let bgColor = "#1a2733"; // default
    let fontColor = "#fff";
    if(player.gameMode === "Dereceli") { bgColor = "#144d14"; fontColor = "#d0ffd0"; }
    else if(player.gameMode === "DeRank FF") { bgColor = "#5a1414"; fontColor = "#ffbaba"; }

    row.style.backgroundColor = bgColor;

    row.innerHTML = `
      <td style="color:${fontColor}; font-weight:600">${player.lobbyCode}</td>
      <td style="color:${fontColor}; font-weight:600">${player.gameMode}</td>
      <td style="color:${fontColor}">${player.minRank}</td>
      <td style="color:${fontColor}">${player.maxRank}</td>
      <td style="color:${fontColor}">${player.playerCount}</td>
      <td style="color:${fontColor}">${player.ageRange}</td>
      <td style="color:${fontColor}">${player.openTime}</td>
    `;
    tbody.appendChild(row);
}
</script>

</body>
</html>
